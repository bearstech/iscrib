<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<stl:block xmlns="http://www.w3.org/1999/xhtml"
           xmlns:stl="http://www.hforge.org/xml-namespaces/stl">

<h1>Etat du formulaire : <em>${state}</em></h1>

<p>
  Il y a encore <b>${mandatory_Empties}</b>  rubrique(s) obligatoire(s) non renseignée(s)
</p>


<!--table class="summary" cellspacing="0" cellpadding="0">
  <tr>
    <th> Nombre Total de rubriques </th>
    <th> Rubriques obligatoires remplies </th>
    <th> Rubriques optionnelles remplies </th>
    <th> Rubriques obligatoires vides </th>
  </tr>
  <tr>
    <td> <b stl:content="All_fields"/> </td>
    <td> <b stl:content="mandatory_nonEmpties"/> </td>
    <td> <b stl:content="optional_nonEmpties"/> </td>
    <td> <b stl:content="mandatory_Empties"/> </td>
  </tr>
</table-->

<stl:block stl:if="is_exportable">
  <p>
  Le formulaire est terminé, vous pouvez l'exporter dans la base de données
  MySQL en cliquant le bouton ci-dessous :
  </p>
  <blockquote>
    <form method="post">
      <input type="submit" value="Exporter" name=";submitted2exported"/>
    </form>
  </blockquote>
</stl:block>

<stl:block stl:if="not is_complete">
<stl:block stl:if="not is_finished">
    <p> La<a href="#controles">  liste des contrôles </a> et la<a href="#vides"> liste des rubriques non remplies </a> doivent être vides pour pouvoir envoyer le formulaire</p>
   <blockquote>
    <form method="post">
      <input style="color: gray;" type="submit" value="Envoyer le formulaire"
        disabled="disabled" name=";pending2submitted"/>
    </form>
  </blockquote>
</stl:block>
</stl:block>

<stl:block stl:if="is_complete">
   <p> Le formulaire est complet, tous les contrôles sont à OUI. Vous pouvez
    envoyer le formulaire.  Pour l'envoyer à l'administrateur cliquez sur le
    bouton ci-dessous : </p>
  <blockquote>
    <form method="post">
      <input type="submit" value="Envoyer le formulaire" name=";pending2submitted"/>
    </form>
  </blockquote>
</stl:block>

<h2>Pour information, en l'état actuel du remplissage</h2>
<table class="Check" cellspacing="0" cellpadding="0">
  <tr stl:repeat="alert resalt">
    <td class="idCheck">${alert/idalt}</td>
    <td class="textCheck">${alert/textalt}</td>
    <td class="textCheck">${alert/resultat}</td>
  </tr>
</table>


<h2 id="controles">Liste des contrôles</h2>
<p>
La liste des contrôles doit être vide  pour que l'on puisse envoyer le formulaire
</p>
<table>
  <tr valign="top">
    <td>
      <table class="Check" cellspacing="0" cellpadding="0">
        <stl:block stl:repeat="res1 controle_blocks1">
        <tr style="background-color: rgb(202,220,255); text-align:center">
          <td colspan="4">
            <a style="text-decoration: underline" href="${res1/section_url}">
             Retour chapitre <b>${res1/section_title}</b>
            </a>
      </td>
        </tr>
        <tr stl:repeat="control res1/lines">
          <td class="idCheck">${control/num}</td>
          <td class="textCheck">${control/text}</td>
          <td stl:if="control/empty" class="emptyCheck" colspan="2">Incomplet</td>
          <stl:block stl:if="not control/empty">
            <td stl:if="not control/fail" class="okCheck">Oui</td>
            <td stl:if="control/fail" class="failCheck">Non</td>
          </stl:block>
        </tr>
        </stl:block>
      </table>
    </td>
    <td>
      <table class="Check" cellspacing="0" cellpadding="0">
        <stl:block stl:repeat="res2 controle_blocks2">
        <tr style="background-color: rgb(202,220,255); text-align:center">
          <td colspan="4">
            <a style="text-decoration: underline" href="${res2/section_url}">
             Retour chapitre <b>${res2/section_title}</b>
            </a>
          </td>
        </tr>
        <tr stl:repeat="control res2/lines">
          <td class="idCheck">${control/num}</td>
          <td class="textCheck">${control/text}</td>
          <td stl:if="control/empty" class="emptyCheck" colspan="2">Incomplet</td>
          <stl:block stl:if="not control/empty">
            <td stl:if="not control/fail" class="okCheck">Oui</td>
            <td stl:if="control/fail" class="failCheck">Non</td>
          </stl:block>
        </tr>
        </stl:block>
      </table>

    </td>
  </tr>
</table>




<h2 id="vides">Liste des rubriques non remplies</h2>

<!--table class="summary" cellspacing="0" cellpadding="0">
  <tr>
    <th> Nombre Total de rubriques </th>
    <th> Rubriques obligatoires remplies </th>
    <th> Rubriques optionnelles remplies </th>
    <th> Rubriques obligatoires vides </th>
  </tr>
  <tr>
    <td> <b stl:content="All_fields"/> </td>
    <td> <b stl:content="mandatory_nonEmpties"/> </td>
    <td> <b stl:content="optional_nonEmpties"/> </td>
    <td> <b stl:content="mandatory_Empties"/> </td>
  </tr>
</table-->

<br/>
<table border="0">
  <tr valign="top">
    <td>

      <table class="Check" cellspacing="0" cellpadding="0">
        <tr stl:repeat="champ restype0">
          <td class="idCheck">${champ/chp}</td>
          <!--td class="textCheck" stl:content="champ/type"/-->
        </tr>
      </table>

    </td>
    <td>

      <table class="Check" cellspacing="0" cellpadding="0">
        <tr stl:repeat="champ restype1">
          <td class="idCheck">${champ/chp}</td>
          <!--td class="textCheck" stl:content="champ/type"/-->
        </tr>
      </table>


    </td>
    <td>

      <table class="Check" cellspacing="0" cellpadding="0">
        <tr stl:repeat="champ restype2">
          <td class="idCheck">${champ/chp}</td>
          <!--td class="textCheck" stl:content="champ/type"/-->
        </tr>
      </table>

    </td>
    <td>

      <table class="Check" cellspacing="0" cellpadding="0">
        <tr stl:repeat="champ restype3">
          <td class="idCheck">${champ/chp}</td>
          <!--td class="textCheck" stl:content="champ/type"/-->
        </tr>
      </table>



    </td>
  </tr>
</table>


</stl:block>
