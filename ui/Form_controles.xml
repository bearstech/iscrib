<?xml version="1.0" encoding="UTF-8"?>
<stl:block xmlns="http://www.w3.org/1999/xhtml"
  xmlns:stl="http://xml.itools.org/namespaces/stl">

<h1>Etat du formulaire : <em stl:content="state" /></h1>

<p>
  Il y a encore <b stl:content="mandatory_Empties"/>  rubrique(s) obligatoire(s) non renseignée(s) 
</p>


<!--table class="summary" cellspacing="0" cellpadding="0">
  <tr>
    <th> Nombre Total de rubriques </th>
    <th> Rubriques obligatoires remplies </th>
    <th> Rubriques optionnelles remplies </th>
    <th> Rubriques obligatoires vides </th>
  </tr>
  <tr>
    <td> <b stl:content="All_fields"/> </td>
    <td> <b stl:content="mandatory_nonEmpties"/> </td>
    <td> <b stl:content="optional_nonEmpties"/> </td>
    <td> <b stl:content="mandatory_Empties"/> </td>
  </tr>
</table-->

<stl:block if="is_exportable">
  <p>
  Le formulaire est terminé, vous pouvez l'exporter dans la base de données
  MySQL en cliquant le bouton ci-dessus :
  </p>
  <blockquote>
    <form action=";submitted2exported" method="post">
      <input type="submit" value="Exporter" />
    </form>
  </blockquote>
</stl:block>

<stl:block if="not is_complete">
<stl:block if="not is_finished">
    <p > La<a href="#controles">  liste des contrôles </a> et la<a href="#vides"> liste des rubriques non remplies </a> doivent être vides pour pouvoir envoyer le formulaire</p>
   <blockquote>
    <form action=";pending2submitted" method="post">
      <input style="color: gray;" value="Envoyer le formulaire" type="submit" 
             disabled="True"/>
    </form>
  </blockquote>
</stl:block> 
</stl:block>

<stl:block if="is_complete">
   <p> Le formulaire est complet, tous les contrôles sont à OUI. Vous pouvez
    envoyer le formulaire.  Pour l'envoyer à l'administrateur cliquez sur le
    bouton ci-dessous : </p> 
  <blockquote> 
    <form action=";pending2submitted" method="post">
      <input type="submit" value="Envoyer le formulaire" />
    </form>
  </blockquote>
</stl:block>

<h2>Pour information, en l'état actuel du remplissage</h2>
<table class="Check" cellspacing="0" cellpadding="0">
  <tr stl:repeat="alert resalt">
    <td  class="idCheck" stl:content="alert/idalt"/>
    <td  class="textCheck" stl:content="alert/textalt"/>
    <td  class="textCheck" stl:content="alert/resultat"/>
  </tr>
</table>


<h2 id="controles">Liste des contrôles</h2>
<p>
La liste des contrôles doit être vide  pour que l'on puisse envoyer le formulaire
</p>
<table>
  <tr valign="top">
    <td>
      <table class="Check" cellspacing="0" cellpadding="0">
        <stl:block repeat="res1 controle_blocks1">
        <tr style="background-color: rgb(202,220,255); text-align:center" >
          <td colspan="4">
            <a style="text-decoration: underline" 
               stl:attributes="href res1/section_url">
             Retour chapitre <b stl:content="res1/section_title"/>
            </a> 
      </td>
        </tr>
        <tr stl:repeat="control res1/lines">
          <td class="idCheck" stl:content="control/num"/>
          <td class="textCheck" stl:content="control/text"/>
          <td colspan="2" stl:if="control/empty" class="emptyCheck">Incomplet</td>
          <stl:block stl:if="not control/empty">
            <td stl:if="not control/fail" class="okCheck">Oui</td>
            <td stl:if="control/fail" class="failCheck">Non</td>
          </stl:block>
        </tr>
        </stl:block>
      </table>
    </td> 
    <td>
      <table class="Check" cellspacing="0" cellpadding="0">
        <stl:block repeat="res2 controle_blocks2">
        <tr style="background-color: rgb(202,220,255); text-align:center" >
          <td colspan="4">
            <a style="text-decoration: underline" 
               stl:attributes="href res2/section_url" >
             Retour chapitre <b stl:content="res2/section_title"/>
            </a> 
          </td>
        </tr>
        <tr stl:repeat="control res2/lines">
          <td class="idCheck" stl:content="control/num"/>
          <td class="textCheck" stl:content="control/text"/>
          <td colspan="2" stl:if="control/empty" class="emptyCheck">Incomplet</td>
          <stl:block stl:if="not control/empty">
            <td stl:if="not control/fail" class="okCheck">Oui</td>
            <td stl:if="control/fail" class="failCheck">Non</td>
          </stl:block>
        </tr>
        </stl:block>
      </table>

    </td>
  </tr>
</table>




<h2 id="vides">Liste des rubriques non remplies</h2>

<!--table class="summary" cellspacing="0" cellpadding="0">
  <tr>
    <th> Nombre Total de rubriques </th>
    <th> Rubriques obligatoires remplies </th>
    <th> Rubriques optionnelles remplies </th>
    <th> Rubriques obligatoires vides </th>
  </tr>
  <tr>
    <td> <b stl:content="All_fields"/> </td>
    <td> <b stl:content="mandatory_nonEmpties"/> </td>
    <td> <b stl:content="optional_nonEmpties"/> </td>
    <td> <b stl:content="mandatory_Empties"/> </td>
  </tr>
</table-->

<br/>
<table border="0">
  <tr valign="top">
    <td>

      <table  class="Check" cellspacing="0" cellpadding="0">
        <tr stl:repeat="champ restype0">
          <td class="idCheck" stl:content="champ/chp"/>
          <!--td class="textCheck" stl:content="champ/type"/-->
        </tr>
      </table>

    </td> 
    <td>
 
      <table  class="Check" cellspacing="0" cellpadding="0">
        <tr stl:repeat="champ restype1">
          <td class="idCheck" stl:content="champ/chp"/>
          <!--td class="textCheck" stl:content="champ/type"/-->
        </tr>
      </table>


    </td>
    <td>

      <table  class="Check" cellspacing="0" cellpadding="0">
        <tr stl:repeat="champ restype2">
          <td class="idCheck" stl:content="champ/chp"/>
          <!--td class="textCheck" stl:content="champ/type"/-->
        </tr>
      </table>

    </td> 
    <td>
 
      <table  class="Check" cellspacing="0" cellpadding="0">
        <tr stl:repeat="champ restype3">
          <td class="idCheck" stl:content="champ/chp"/>
          <!--td class="textCheck" stl:content="champ/type"/-->
        </tr>
      </table>

       

    </td>
  </tr>
</table>

 
</stl:block>  
