<?xml version="1.0" encoding="UTF-8"?>
<stl:block xmlns:stl="http://xml.itools.org/namespaces/stl" xmlns="http://www.w3.org/1999/xhtml">

<form method="get" action=";search_form">
  <table class="form">
    <tr>
      <th class="title" colspan="2">Recherche</th>
    </tr>
    <tr>
      <th>Nom de la ville
          <br/>(exemple "saint")</th>
      <td>
        <input name="search_name" id="search_name" size="30" type="text" value="${search_name}"/>
      </td>
    </tr>
    <tr>
      <th>Département (exemple : 02)<br/>
	      <!--i style="font-size:8px;">Seul 01 et 02 sont en base</i-->
      </th>
      <td>
        <select name="search_dep" id="search_dep">
          <option value="">--- Tous les départements ---</option>
          <option stl:repeat="dep departements" value="${dep/value}" selected="${dep/selected}">${dep/name}</option>
        </select>
        <!--input type="text" name="search_dep" size="4"
               stl:attributes="value search_dep"/--><br/>
      </td>
    </tr>
    <tr>
      <th>Code_ua <br/>
      </th>
      <td>
        <input name="search_code" size="6" type="text" value="${search_code}"/><br/>
      </td>
    </tr>
     <tr>
      <th>Etat du formulaire<br/>
      </th>
      <td>
        <!--input type="text" name="search_state" size="7"
               stl:attributes="value search_state"/--><br/>
        <select name="search_state" id="search_state">
          <option value=""></option>
          <option stl:repeat="state states" value="${state/value}" selected="${state/selected}">${state/name}</option>
        </select>
      </td>
    </tr>
    <tr>
      <th></th>
      <td class="submit"><input type="submit" value="Rechercher"/></td>
    </tr>
  </table>
</form>


<hr/>

<table class="form">
  <tr stl:if="not table/objects">
    <td colspan="4">
      <em>No objects found.</em>
    </td>
    <td></td>
    <td></td>
  </tr>
  <tr stl:if="too_long_answer">
    <td colspan="4">
      <em>${too_long_answer}</em>
    </td>
    <td></td>
    <td></td>
  </tr>
  <div class="batchcontrol" stl:if="batch/total">
    <stl:inline if="batch/control">${batch/control}</stl:inline>
    <a stl:if="batch/previous" href="${batch/previous}">&lt;&lt;</a>
    <a stl:if="batch/next" href="${batch/next}">>></a>
  </div>

  <stl:block if="table/objects">
    <tr>
      <th style="border-bottom: 1px dotted black; text-align: center">
        Code <!--stl:inline content="table/sortcontrol(oid)" /-->
      </th>
      <th align="left" style="border-bottom: 1px dotted black; text-align: center">
        Ville <stl:inline>${table/sortcontrol(title)}</stl:inline>
      </th>
      <th align="left" style="border-bottom: 1px dotted black; text-align: center">
        Date <stl:inline>${table/sortcontrol(date)}</stl:inline>
      </th>
      <th align="left" style="border-bottom: 1px dotted black; text-align: center">
        Etat <stl:inline>${table/sortcontrol(form_state)}</stl:inline>
      </th>
    </tr>
    <tr stl:repeat="object table/objects">
      <td style="text-align: right">
        <a href="${object/url}">${object/name}</a>
      </td>
      <td>
        <a href="${object/url}">${object/title}</a>
      </td>
      <td>${object/date}</td>
      <td>${object/form_state}</td>
    </tr>
  </stl:block>
</table>

</stl:block>
